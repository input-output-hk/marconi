<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Marconi.Core.Transformer.WithPruning</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">marconi-core-1.2.0.0: Modular indexing for rewindable ledger</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Marconi.Core.Transformer.WithPruning</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A transformer that prune the content of an indexer</p><p>See <a href="Marconi-Core.html">Marconi.Core</a> for documentation.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">class</span> <a href="#t:Prunable">Prunable</a> m event indexer <span class="keyword">where</span><ul class="subs"><li><a href="#v:prune">prune</a> :: <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event) =&gt; <a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event -&gt; indexer event -&gt; m (indexer event)</li><li><a href="#v:pruningPoint">pruningPoint</a> :: indexer event -&gt; m (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event))</li></ul></li><li class="src short"><a href="#v:pruneVia">pruneVia</a> :: (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m, <a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a> m event indexer, <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event)) =&gt; Lens' s (indexer event) -&gt; <a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event -&gt; s -&gt; m s</li><li class="src short"><a href="#v:pruningPointVia">pruningPointVia</a> :: <a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a> m event indexer =&gt; Getter s (indexer event) -&gt; s -&gt; m (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event))</li><li class="src short"><span class="keyword">data</span> <a href="#t:WithPruning">WithPruning</a> indexer event</li><li class="src short"><a href="#v:withPruning">withPruning</a> :: <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; indexer event -&gt; <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event</li><li class="src short"><a href="#v:nextPruning">nextPruning</a> :: Lens' (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) (Seq (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event))</li><li class="src short"><a href="#v:stepsBeforeNext">stepsBeforeNext</a> :: Lens' (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a></li><li class="src short"><a href="#v:currentDepth">currentDepth</a> :: Lens' (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a></li><li class="src short"><span class="keyword">class</span> <a href="#t:HasPruningConfig">HasPruningConfig</a> indexer <span class="keyword">where</span><ul class="subs"><li><a href="#v:securityParam">securityParam</a> :: Lens' (indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a></li><li><a href="#v:pruneEvery">pruneEvery</a> :: Lens' (indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a></li></ul></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:Prunable" class="def">Prunable</a> m event indexer <span class="keyword">where</span> <a href="#t:Prunable" class="selflink">#</a></p><div class="doc"><p>The indexer can prune old data.
 The main purpose is to speed up query processing.
 If the indexer is <code>Rollbackable</code> and <code><a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a></code>,
 it can't <code><a href="Marconi-Core-Class.html#v:rollback" title="Marconi.Core.Class">rollback</a></code> behind the <code><a href="Marconi-Core-Transformer-WithPruning.html#v:pruningPoint" title="Marconi.Core.Transformer.WithPruning">pruningPoint</a></code>,
 the idea is to call <code><a href="Marconi-Core-Transformer-WithPruning.html#v:prune" title="Marconi.Core.Transformer.WithPruning">prune</a></code> on points that can't be rollbacked anymore.</p><ul><li><code>indexer</code> is the indexer implementation type</li><li><code>desc</code> the descriptor of the indexer, fixing the <code>Point</code> types</li><li><code>m</code> the monad in which our indexer operates</li></ul></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:prune" class="def">prune</a> :: <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event) =&gt; <a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event -&gt; indexer event -&gt; m (indexer event) <a href="#v:prune" class="selflink">#</a></p><p class="src"><a id="v:pruningPoint" class="def">pruningPoint</a> :: indexer event -&gt; m (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event)) <a href="#v:pruningPoint" class="selflink">#</a></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Prunable">Instances</h4><details id="i:Prunable" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Prunable:Prunable:1"></span> (<a href="Marconi-Core-Transformer-Class.html#t:IndexerTrans" title="Marconi.Core.Transformer.Class">IndexerTrans</a> t, <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m, <a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a> m event indexer) =&gt; <a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a> m event (t indexer)</span> <a href="#t:Prunable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Prunable:Prunable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Marconi-Core-Transformer-WithPruning.html">Marconi.Core.Transformer.WithPruning</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:prune">prune</a> :: <a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event -&gt; t indexer event -&gt; m (t indexer event) <a href="#v:prune" class="selflink">#</a></p><p class="src"><a href="#v:pruningPoint">pruningPoint</a> :: t indexer event -&gt; m (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event)) <a href="#v:pruningPoint" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Prunable:Prunable:2"></span> (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m, <a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a> m event store) =&gt; <a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a> m event (<a href="Marconi-Core-Indexer-MixedIndexer.html#t:MixedIndexer" title="Marconi.Core.Indexer.MixedIndexer">MixedIndexer</a> store mem)</span> <a href="#t:Prunable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Prunable:Prunable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Marconi-Core-Transformer-WithPruning.html">Marconi.Core.Transformer.WithPruning</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:prune">prune</a> :: <a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event -&gt; <a href="Marconi-Core-Indexer-MixedIndexer.html#t:MixedIndexer" title="Marconi.Core.Indexer.MixedIndexer">MixedIndexer</a> store mem event -&gt; m (<a href="Marconi-Core-Indexer-MixedIndexer.html#t:MixedIndexer" title="Marconi.Core.Indexer.MixedIndexer">MixedIndexer</a> store mem event) <a href="#v:prune" class="selflink">#</a></p><p class="src"><a href="#v:pruningPoint">pruningPoint</a> :: <a href="Marconi-Core-Indexer-MixedIndexer.html#t:MixedIndexer" title="Marconi.Core.Indexer.MixedIndexer">MixedIndexer</a> store mem event -&gt; m (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event)) <a href="#v:pruningPoint" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Prunable:Prunable:3"></span> (<a href="Marconi-Core-Transformer-Class.html#t:IndexerMapTrans" title="Marconi.Core.Transformer.Class">IndexerMapTrans</a> t, <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m, <a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a> m output indexer) =&gt; <a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a> m output (t indexer output)</span> <a href="#t:Prunable" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Prunable:Prunable:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Marconi-Core-Transformer-WithPruning.html">Marconi.Core.Transformer.WithPruning</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:prune">prune</a> :: <a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> output -&gt; t indexer output output -&gt; m (t indexer output output) <a href="#v:prune" class="selflink">#</a></p><p class="src"><a href="#v:pruningPoint">pruningPoint</a> :: t indexer output output -&gt; m (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> output)) <a href="#v:pruningPoint" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:pruneVia" class="def">pruneVia</a> :: (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m, <a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a> m event indexer, <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event)) =&gt; Lens' s (indexer event) -&gt; <a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event -&gt; s -&gt; m s <a href="#v:pruneVia" class="selflink">#</a></p><div class="doc"><p>Helper to implement the <code>prune</code> functon of <code><a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a></code> when we use a wrapper.
 Unfortunately, as <code>m</code> must have a functor instance, we can't use <code>deriving via</code> directly.</p></div></div><div class="top"><p class="src"><a id="v:pruningPointVia" class="def">pruningPointVia</a> :: <a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a> m event indexer =&gt; Getter s (indexer event) -&gt; s -&gt; m (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event)) <a href="#v:pruningPointVia" class="selflink">#</a></p><div class="doc"><p>Helper to implement the <code>pruningPoint</code> functon of <code><a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a></code> when we use a wrapper.
 Unfortunately, as <code>m</code> must have a functor instance, we can't use <code>deriving via</code> directly.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:WithPruning" class="def">WithPruning</a> indexer event <a href="#t:WithPruning" class="selflink">#</a></p><div class="doc"><p>WithPruning control when we should prune an indexer</p><p>The main purpose is to optimize storage for events that can't be rollbacked anymore.</p><p>In some contexts, once you know that an event can't be rollback anymore,
 your indexer may not need it, or may process it's information to make it
 irrelevant.
 In this case, you may want to <code><a href="Marconi-Core-Transformer-WithPruning.html#v:prune" title="Marconi.Core.Transformer.WithPruning">prune</a></code> the stored events.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:WithPruning">Instances</h4><details id="i:WithPruning" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WithPruning:IndexerTrans:1"></span> <a href="Marconi-Core-Transformer-Class.html#t:IndexerTrans" title="Marconi.Core.Transformer.Class">IndexerTrans</a> <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a></span> <a href="#t:WithPruning" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WithPruning:IndexerTrans:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Marconi-Core-Transformer-WithPruning.html">Marconi.Core.Transformer.WithPruning</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:unwrap">unwrap</a> :: <span class="keyword">forall</span> (indexer :: <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) event. Lens' (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) (indexer event) <a href="#v:unwrap" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WithPruning:Queryable:2"></span> <a href="Marconi-Core-Class.html#t:Queryable" title="Marconi.Core.Class">Queryable</a> m event query indexer =&gt; <a href="Marconi-Core-Class.html#t:Queryable" title="Marconi.Core.Class">Queryable</a> m event query (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer)</span> <a href="#t:WithPruning" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WithPruning:Queryable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Marconi-Core-Transformer-WithPruning.html">Marconi.Core.Transformer.WithPruning</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:query">query</a> :: <a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event -&gt; query -&gt; <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event -&gt; m (<a href="Marconi-Core-Type.html#t:Result" title="Marconi.Core.Type">Result</a> query) <a href="#v:query" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WithPruning:IsIndex:3"></span> (MonadError <a href="Marconi-Core-Type.html#t:IndexerError" title="Marconi.Core.Type">IndexerError</a> m, <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event), <a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a> m event indexer, <a href="Marconi-Core-Class.html#t:IsIndex" title="Marconi.Core.Class">IsIndex</a> m event indexer, <a href="Marconi-Core-Class.html#t:HasGenesis" title="Marconi.Core.Class">HasGenesis</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event)) =&gt; <a href="Marconi-Core-Class.html#t:IsIndex" title="Marconi.Core.Class">IsIndex</a> m event (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer)</span> <a href="#t:WithPruning" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WithPruning:IsIndex:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Marconi-Core-Transformer-WithPruning.html">Marconi.Core.Transformer.WithPruning</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:index">index</a> :: <a href="Marconi-Core-Type.html#t:Timed" title="Marconi.Core.Type">Timed</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event) (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> event) -&gt; <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event -&gt; m (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="#v:index" class="selflink">#</a></p><p class="src"><a href="#v:indexAll">indexAll</a> :: (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event), <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a> f) =&gt; f (<a href="Marconi-Core-Type.html#t:Timed" title="Marconi.Core.Type">Timed</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event) (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> event)) -&gt; <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event -&gt; m (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="#v:indexAll" class="selflink">#</a></p><p class="src"><a href="#v:indexAllDescending">indexAllDescending</a> :: (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event), <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a> f) =&gt; f (<a href="Marconi-Core-Type.html#t:Timed" title="Marconi.Core.Type">Timed</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event) (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> event)) -&gt; <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event -&gt; m (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="#v:indexAllDescending" class="selflink">#</a></p><p class="src"><a href="#v:rollback">rollback</a> :: <a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event -&gt; <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event -&gt; m (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="#v:rollback" class="selflink">#</a></p><p class="src"><a href="#v:setLastStablePoint">setLastStablePoint</a> :: <a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event -&gt; <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event -&gt; m (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="#v:setLastStablePoint" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WithPruning:IsSync:4"></span> <a href="Marconi-Core-Class.html#t:IsSync" title="Marconi.Core.Class">IsSync</a> m event indexer =&gt; <a href="Marconi-Core-Class.html#t:IsSync" title="Marconi.Core.Class">IsSync</a> m event (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer)</span> <a href="#t:WithPruning" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WithPruning:IsSync:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Marconi-Core-Transformer-WithPruning.html">Marconi.Core.Transformer.WithPruning</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lastStablePoint">lastStablePoint</a> :: <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event -&gt; m (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event) <a href="#v:lastStablePoint" class="selflink">#</a></p><p class="src"><a href="#v:lastSyncPoint">lastSyncPoint</a> :: <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event -&gt; m (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event) <a href="#v:lastSyncPoint" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WithPruning:Resetable:5"></span> (<a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Marconi-Core-Transformer-WithPruning.html#t:Prunable" title="Marconi.Core.Transformer.WithPruning">Prunable</a> m event indexer, <a href="Marconi-Core-Class.html#t:Resetable" title="Marconi.Core.Class">Resetable</a> m event indexer, <a href="Marconi-Core-Class.html#t:HasGenesis" title="Marconi.Core.Class">HasGenesis</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event), <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event)) =&gt; <a href="Marconi-Core-Class.html#t:Resetable" title="Marconi.Core.Class">Resetable</a> m event (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer)</span> <a href="#t:WithPruning" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WithPruning:Resetable:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Marconi-Core-Transformer-WithPruning.html">Marconi.Core.Transformer.WithPruning</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:reset">reset</a> :: <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event -&gt; m (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="#v:reset" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WithPruning:Closeable:6"></span> <a href="Marconi-Core-Class.html#t:Closeable" title="Marconi.Core.Class">Closeable</a> m indexer =&gt; <a href="Marconi-Core-Class.html#t:Closeable" title="Marconi.Core.Class">Closeable</a> m (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer)</span> <a href="#t:WithPruning" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WithPruning:Closeable:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Marconi-Core-Transformer-WithPruning.html">Marconi.Core.Transformer.WithPruning</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:close">close</a> :: <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event -&gt; m () <a href="#v:close" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WithPruning:HasPruningConfig:7"></span> <a href="Marconi-Core-Transformer-WithPruning.html#t:HasPruningConfig" title="Marconi.Core.Transformer.WithPruning">HasPruningConfig</a> (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer)</span> <a href="#t:WithPruning" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WithPruning:HasPruningConfig:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Marconi-Core-Transformer-WithPruning.html">Marconi.Core.Transformer.WithPruning</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:securityParam">securityParam</a> :: Lens' (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a> <a href="#v:securityParam" class="selflink">#</a></p><p class="src"><a href="#v:pruneEvery">pruneEvery</a> :: Lens' (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a> <a href="#v:pruneEvery" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:withPruning" class="def">withPruning</a> <a href="#v:withPruning" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a></td><td class="doc"><p>how far can a rollback go</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a></td><td class="doc"><p>once we have enough events, how often do we prune</p></td></tr><tr><td class="src">-&gt; indexer event</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:nextPruning" class="def">nextPruning</a> :: Lens' (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) (Seq (<a href="Marconi-Core-Type.html#t:Point" title="Marconi.Core.Type">Point</a> event)) <a href="#v:nextPruning" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:stepsBeforeNext" class="def">stepsBeforeNext</a> :: Lens' (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a> <a href="#v:stepsBeforeNext" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:currentDepth" class="def">currentDepth</a> :: Lens' (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a> <a href="#v:currentDepth" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:HasPruningConfig" class="def">HasPruningConfig</a> indexer <span class="keyword">where</span> <a href="#t:HasPruningConfig" class="selflink">#</a></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:securityParam" class="def">securityParam</a> :: Lens' (indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a> <a href="#v:securityParam" class="selflink">#</a></p><p class="src"><a id="v:pruneEvery" class="def">pruneEvery</a> :: Lens' (indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a> <a href="#v:pruneEvery" class="selflink">#</a></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:HasPruningConfig">Instances</h4><details id="i:HasPruningConfig" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:HasPruningConfig:HasPruningConfig:1"></span> <a href="Marconi-Core-Transformer-WithPruning.html#t:HasPruningConfig" title="Marconi.Core.Transformer.WithPruning">HasPruningConfig</a> (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer)</span> <a href="#t:HasPruningConfig" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:HasPruningConfig:HasPruningConfig:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Marconi-Core-Transformer-WithPruning.html">Marconi.Core.Transformer.WithPruning</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:securityParam">securityParam</a> :: Lens' (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a> <a href="#v:securityParam" class="selflink">#</a></p><p class="src"><a href="#v:pruneEvery">pruneEvery</a> :: Lens' (<a href="Marconi-Core-Transformer-WithPruning.html#t:WithPruning" title="Marconi.Core.Transformer.WithPruning">WithPruning</a> indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a> <a href="#v:pruneEvery" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:HasPruningConfig:HasPruningConfig:2"></span> (<a href="Marconi-Core-Transformer-Class.html#t:IndexerTrans" title="Marconi.Core.Transformer.Class">IndexerTrans</a> t, <a href="Marconi-Core-Transformer-WithPruning.html#t:HasPruningConfig" title="Marconi.Core.Transformer.WithPruning">HasPruningConfig</a> indexer) =&gt; <a href="Marconi-Core-Transformer-WithPruning.html#t:HasPruningConfig" title="Marconi.Core.Transformer.WithPruning">HasPruningConfig</a> (t indexer)</span> <a href="#t:HasPruningConfig" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:HasPruningConfig:HasPruningConfig:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Marconi-Core-Transformer-WithPruning.html">Marconi.Core.Transformer.WithPruning</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:securityParam">securityParam</a> :: Lens' (t indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a> <a href="#v:securityParam" class="selflink">#</a></p><p class="src"><a href="#v:pruneEvery">pruneEvery</a> :: Lens' (t indexer event) <a href="file:///nix/store/3qvlqngd5ym003pw8j303ds791x1l2ph-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/Data-Word.html#t:Word" title="Data.Word">Word</a> <a href="#v:pruneEvery" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>